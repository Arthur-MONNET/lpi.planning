<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- icon -->
    <link rel="icon" href="../Group-249.ico">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.min.js"
        integrity="sha512-Dz4zO7p6MrF+VcOD6PUbA08hK1rv0hDv/wGuxSUjImaUYxRyK2gLC6eQWVqyDN9IM1X/kUA8zkykJS/gEVOd3w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--tailwind-->
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Planning</title>
    <style>
        ::-webkit-scrollbar {
            display: none;
        }

        html {
            height: 100%;
        }

        * {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }

        .day.selected::after {
            opacity: 1;
        }

        #tasks {
            min-height: 100%;
            height: 100%;
        }

        .day-hover-tasks {
            min-height: calc(100% - 115px);
        }

        .task.current {
            background-color: #7296e329;
        }

        .task * {
            pointer-events: none;
            -webkit-user-select: none;
            /* Safari */
            -ms-user-select: none;
            /* IE 10 and IE 11 */
            user-select: none;
            /* Standard syntax */
        }

        .day-hover-tasks * {
            -webkit-user-select: none;
            /* Safari */
            -ms-user-select: none;
            /* IE 10 and IE 11 */
            user-select: none;
            /* Standard syntax */
        }

        .task.finished .task-text {
            opacity: 0.3;
        }

        #modal-from-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0;
            background-color: #f7f7f7;
            z-index: 100;
            transition: height 0.3s ease-in-out;
        }

        #modal-from-bottom.open {
            height: 95%;
        }
    </style>
</head>

<body class="flex flex-col items-strech justify-start w-screen h-full bg-[#f7f7f7] overflow-hidden">
    <nav
        class="flex flex-row justify-between items-center w-full border-bottom-[#090a0b0d] border border-solid bg-[#f7f7f7] z-30 fixed top-0 left-0 h-[115px] min-h-[115px]">
        <div id="days" class="flex flex-row overflow-x-scroll gap-[7px] py-[20px] px-[15px] scroll-smooth">
        </div>
        <div id="download"
            class="bg-white border-white border border-solid rounded p-1 mr-[15px] h-[72px] min-h-[72px] w-[56px] min-w-[56px] flex flex-col justify-center items-center shadow-[-5px_0px_10px_10px_#F7F7F799]">
            <a href="../planning.pdf" download="planning.pdf"><i class="fas fa-download"
                    style="font-size: 22px;"></i></a>
        </div>
    </nav>
    <main class="w-screen h-full overflow-y-scroll">
        <div id="tasks" class="flex flex-col items-strech justify-start pt-[115px] bg-[#f7f7f7]">
        </div>
        <div id="next-or-prev-day"
            class="flex flex-col items-center justify-center min-h-full w-full pt-[115px] backdrop-filter backdrop-blur-[10px] bg-[#f7f7f7] absolute top-0 z-[-1] pointer-events-none">
            <p class="day-name uppercase font-bold leading-[26px] text-[#00000090]" style="font-size: 16px;"></p>
            <p class="day-number font-bold leading-[36px]" style="font-size: 32px;"></p>
            <p class="day-month uppercase font-bold leading-[26px] text-[#00000090]" style="font-size: 16px;"></p>
        </div>
    </main>
    <div id="modal-from-bottom">

    </div>
    <script>
        /* site planning de la semaine ( mobile only )
header : 
- liste des jours de la semaine avec un scroll horizontal
    un bouton par jour de la semaine en commençant par le jour actuel ( ex : JEU. 27 JUIL. ) préciser semaine a ou b
    suivit d'un bouton calendrier qui ouvre un calendrier ( qui vient du bas de l'écran ) avec le contenu suivant :
    un scroll vertical avec pour chaque mois a partir du mois actuel : le nom du mois (centré), puis en dessous la première lettre de chaque jour de la semaine ( L M M J V S D ) puis en dessous les numéros des jours du mois ( ex : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ... ) sous forme de grille correspondant au jour de la semaine ( ne commence pas forcément par le lundi )
    dans le coin en haut a droite, un bouton pour fermer le calendrier ou swipe vers le bas pour fermer le calendrier
- un bouton Télécharger le planning qui télécharge le planning de la semaine a et b en pdf

body :
- liste des taches et arrivé des gens du jour selectonnée
    les taches du jour sont affichées sous forme de liste de haut en bas (style liste de course) avec pour chauqe tache :
    - le font de la tache est transparent
    - en haut a gauche : un cercle avec le numéro de la tache dedans ( fond gris-blanc, text blanc pas de bordure )
    - à coté : le nom de la personne qui doit faire la tache ( text gras noir ) + un petit rond de la couleur de la personne (couleur pastel)
    - en dessous : l'intitulé de la tache ( text normal noir )
    et tout à droite aligné avec le cercle : 2 rectangle cote a cote, le premier contient l'horaire de début de la tache et le deuxième l'horaire de fin de la tache ( bord bleu, fond transparent, text bleu )
    si la tache est en cours, le font de la tache devient bleu opacité 20%, le cercle devient bleu, le numéro de la tache devient un icon de sablier, l'horaire de début est remplacé par "en cours" et son rectangle prend un fond bleu et le texte devient blanc, l'horaire de fin disparait
    si la tache est terminée, le cercle devient redevient gris-blanc, le numéro de la tache redevient un numéro, l'horaire de début est remplacé par "terminé" et son rectangle prend un fond gris-blanc et le texte reste blanc, l'horaire de fin ne réapparait pas

un système de mot de passe est mis en place pour accéder au planning

*/

        // Path: js\index.js

        const daysWrapper = document.querySelector('#days');
        const tasksWrapper = document.querySelector('#tasks');

        const now = moment();
        let selectedDay = now.format('DD-MM-YYYY');
        let days = [];

        const tradDays = {
            monday: {
                complete: 'Lundi',
                short: 'Lun.',
            },
            tuesday: {
                complete: 'Mardi',
                short: 'Mar.',
            },
            wednesday: {
                complete: 'Mercredi',
                short: 'Mer.',
            },
            thursday: {
                complete: 'Jeudi',
                short: 'Jeu.',
            },
            friday: {
                complete: 'Vendredi',
                short: 'Ven.',
            },
            saturday: {
                complete: 'Samedi',
                short: 'Sam.',
            },
            sunday: {
                complete: 'Dimanche',
                short: 'Dim.',
            },
        };
        const tradMonths = {
            january: {
                complete: 'Janvier',
                short: 'Jan.',
            },
            february: {
                complete: 'Février',
                short: 'Fév.',
            },
            march: {
                complete: 'Mars',
                short: 'Mar.',
            },
            april: {
                complete: 'Avril',
                short: 'Avr.',
            },
            may: {
                complete: 'Mai',
                short: 'Mai',
            },
            june: {
                complete: 'Juin',
                short: 'Juin',
            },
            july: {
                complete: 'Juillet',
                short: 'Juil.',
            },
            august: {
                complete: 'Août',
                short: 'Août',
            },
            september: {
                complete: 'Septembre',
                short: 'Sept.',
            },
            october: {
                complete: 'Octobre',
                short: 'Oct.',
            },
            november: {
                complete: 'Novembre',
                short: 'Nov.',
            },
            december: {
                complete: 'Décembre',
                short: 'Déc.',
            },
        };
        const workers = [
            {
                name: 'Salarié',
                color: '#7f8fa6',
            },
            {
                name: 'Myriam',
                color: '#be738d',
            },
            {
                name: 'Lucie',
                color: '#88a069',
            },
            {
                name: 'Producteur',
                color: '#cab06d',
            }
        ];

        const week = {
            odd: {
                monday: [
                    {
                        worker: 0,
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 0,
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'ouverture + matinée + midi',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('14:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                tuesday: [
                    {
                        worker: 0, // Valérie
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'bureau',
                        start: moment('10:00', 'HH:mm'),
                        end: moment('15:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'midi + après-midi + fermeture',
                        start: moment('13:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                wednesday: [
                    {
                        worker: 1, // Myriam
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                thursday: [
                    {
                        worker: 0, // Valérie
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'bureau',
                        start: moment('11:00', 'HH:mm'),
                        end: moment('15:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                friday: [
                    {
                        worker: 0, // Valérie
                        task: 'ouverture + matinée + midi',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('15:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'bureau',
                        start: moment('11:00', 'HH:mm'),
                        end: moment('15:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'ouverture + matinée + midi',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('14:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'après-midi',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('19:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                saturday: [
                    {
                        worker: 0, // Valérie
                        task: 'journee complète',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'matinée + midi + après-midi',
                        start: moment('10:00', 'HH:mm'),
                        end: moment('17:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                sunday: [],
            },
            even: {
                monday: [
                    {
                        worker: 0, // Valérie
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 0,
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'ouverture + matinée + midi',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('15:45', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                tuesday: [
                    {
                        worker: 0, // Valérie
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 0, // Valérie
                        task: 'bureau',
                        start: moment('13:00', 'HH:mm'),
                        end: moment('15:00', 'HH:mm'),
                    },
                    {
                        worker: 0, // Valérie
                        task: 'début d\'après-midi',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('16:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'bureau',
                        start: moment('10:00', 'HH:mm'),
                        end: moment('16:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'après-midi + fermeture',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'midi + après-midi + fermeture',
                        start: moment('13:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                wednesday: [
                    {
                        worker: 1, // Myriam
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                thursday: [
                    {
                        worker: 0, // Valérie
                        task: 'ouverture + matinée',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'bureau',
                        start: moment('12:30', 'HH:mm'),
                        end: moment('15:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'après-midi + fermeture',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('09:00', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                friday: [
                    {
                        worker: 0, // Valérie
                        task: 'journee complète',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 1, // Myriam
                        task: 'bureau',
                        start: moment('09:00', 'HH:mm'),
                        end: moment('14:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'ouverture + matinée + midi',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('14:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'après-midi',
                        start: moment('15:00', 'HH:mm'),
                        end: moment('19:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('09:00', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                saturday: [
                    {
                        worker: 1, // Myriam
                        task: 'journee complète',
                        start: moment('08:45', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                    {
                        worker: 2, // Lucie
                        task: 'matinée + midi + après-midi',
                        start: moment('10:00', 'HH:mm'),
                        end: moment('17:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'matinée',
                        start: moment('09:00', 'HH:mm'),
                        end: moment('13:00', 'HH:mm'),
                    },
                    {
                        worker: 3,
                        task: 'après-midi',
                        start: moment('16:00', 'HH:mm'),
                        end: moment('20:00', 'HH:mm'),
                    },
                ],
                sunday: [],
            }
        }
        generateDays(now).then((days) => {
            generateDaysHTML(days);
        })

        async function generateDays(firstDay) {
            days = [];
            // si on a dépassé 21h, on passe au jour suivant
            if (now.hour() >= 21) {
                firstDay.add(1, 'day');
                firstDay.hour(0);
            }
            let firstWeekType = firstDay.week() % 2 === 0 ? 'even' : 'odd';
            // si on est dimanche, on passe au lundi
            if (firstDay.day() === 0) {
                firstWeekType = firstWeekType === 'even' ? 'odd' : 'even';
            }
            let firstDayName = firstDay.format('dddd').toLowerCase();

            for (let i = 0; i < 7; i++) {
                const day = firstDay.clone().add(i, 'day');
                // si day est autre que le jour actuel, on passe à 0h
                if (day.format('D') !== now.format('D')) {
                    // set to 0h
                    day.hour(0);
                }
                let weekType = day.week() % 2 === 0 ? 'even' : 'odd';
                if (day.day() === 0) {
                    weekType = weekType === 'even' ? 'odd' : 'even';
                }
                const dayName = day.format('dddd').toLowerCase();
                const monthName = day.format('MMMM').toLowerCase();
                let tasks = week[weekType][dayName].sort((a, b) => a.start - b.start)
                // set date + hour of start and end
                for (const task of tasks) {
                    task.start.set({
                        year: day.year(),
                        month: day.month(),
                        date: day.date(),
                    });
                    task.end.set({
                        year: day.year(),
                        month: day.month(),
                        date: day.date(),
                    });
                }
                let finishedTasks = tasks.filter(task => task.end.isBefore(now));
                let currentTask = tasks.filter(task => task.start.isBefore(now) && task.end.isAfter(now));
                let nextTask = tasks.filter(task => task.start.isAfter(now));
                tasks = [...finishedTasks, ...currentTask, ...nextTask];
                const objDay = {
                    moment: day,
                    weekType: weekType,
                    shortDayName: tradDays[dayName].short,
                    dayNumber: day.format('DD'),
                    shortMonthName: tradMonths[monthName].short,
                    tasks,
                };
                days.push(objDay);
            }
            return days;
        }

        function generateDaysHTML(days) {
            daysWrapper.innerHTML = '';
            for (const day of days) {
                const weekTypeColor = day.weekType === 'even' ? '#f3d269' : '#f4a08d';
                let styleOfDayButton = "bg-white border-white border border-solid rounded p-1 h-[72px] min-h-[72px] w-[56px] min-w-[56px] flex flex-col justify-center items-center after:bg-[" + weekTypeColor + "] after:rounded-full after:content-'' after:opacity-0 after:block after:h-[3px] after:w-[24px] after:mb-[-4px]";
                if (day.tasks.length === 0) {
                    styleOfDayButton = "bg-[#f7f7f7] border-[#090a0b0d] border border-solid rounded p-1 h-[72px] min-h-[72px] w-[56px] min-w-[56px] flex flex-col justify-center items-center after:bg-transparent after:rounded-full after:content-'' after:block after:h-[3px] after:w-[24px] after:mb-[-4px] pointer-events-none"
                }
                const dayHTML = `
<div class="day ${styleOfDayButton}"
data-day="${day.moment.format('DD-MM-YYYY')}">
    <p class="day-name uppercase font-bold leading-[20px] ${day.tasks.length === 0 ? 'opacity-[0.3]' : ''}" style="font-size: 12px;"
    >${day.shortDayName}</p>
    <p class="day-number font-bold leading-[24px] ${day.tasks.length === 0 ? 'opacity-[0.3]' : ''}" style="font-size: 22px;"
    >${day.dayNumber}</p>
    <p class="day-month uppercase font-bold leading-[20px] ${day.tasks.length === 0 ? 'opacity-[0.3]' : ''}" style="font-size: 12px;"
    >${day.shortMonthName}</p>
</div>`
                daysWrapper.innerHTML += dayHTML;
            }
            // add calendar button
            const calendarButton = `
<div class="day bg-white border-white border border-solid rounded p-1 h-[72px] min-h-[72px] w-[56px] min-w-[56px] flex flex-col justify-center items-center" id="calendar-button">
    <i class="far fa-calendar-plus" style="font-size: 22px;"></i>
</div>`
            daysWrapper.innerHTML += calendarButton;
            document.querySelector('.day').classList.add('selected');
            selectedDay = days[0].moment.format('DD-MM-YYYY');

            // scroll to start
            daysWrapper.scrollLeft = 0;

            generateTasksHTML(days[0]);

            // event listeners
            const daysElements = document.querySelectorAll('.day');
            for (const dayElement of daysElements) {
                dayElement.addEventListener('click', function () {
                    if (this.id === 'calendar-button') {
                        // open calendar
                        openCalendar();
                    } else {
                        // select day
                        for (const dayElement of daysElements) {
                            dayElement.classList.remove('selected');
                        }
                        this.classList.add('selected');
                        selectedDay = this.dataset.day;
                        const day = days.find(day => day.moment.format('DD-MM-YYYY') === this.dataset.day);
                        generateTasksHTML(day)
                    }
                });
            }
        }

        function generateTasksHTML(day) {
            tasksWrapper.innerHTML = '';
            let index = 1;
            for (const task of day.tasks) {
                const worker = workers[task.worker];
                let textIndex = index < 10 ? `0${index}` : index;
                let taskStart = task.start.format('HH:mm');
                if (task.start.isBefore(now) && task.end.isAfter(now)) {
                    textIndex = '<i class="fas fa-hourglass-half text-white" style="font-size: 10px;"></i>';
                    taskStart = 'en cours';
                }

                if (task.end.isBefore(now)) {
                    taskStart = 'terminé';
                }
                const taskHTML = `
<div class="task ${task.start.isBefore(now) && task.end.isAfter(now) ? 'current ' : ''} ${task.end.isBefore(now) ? 'finished ' : ''}h-[80px] min-h-[80px] w-full flex justify-between items-start px-[15px] pt-[10px]">
    <div class="task-content flex items-start gap-[10px] w-full">
    <p class="task-number bg-${taskStart === 'en cours' ? '[#7296e3]' : '[#b9b9b9]'} rounded-full min-w-[20px] min-h-[20px] flex justify-center items-center text-white mt-[5px]" style="font-size: 12px;"
    >${textIndex}</p>
    <div class="task-text w-full">
        <p class="task-worker flex items-center after:bg-[${worker.color}] after:rounded-full after:content-'' after:block after:w-full after:mx-[15px] after:h-[2px] text-black font-bold" style="font-size: 18px;">${worker.name}</p>
        <p class="task-name">${task.task}</p>
        </div>
    </div>
    <div class="task-time flex flex-row justify-between items-end gap-[5px]">
        <p class="task-start bg-${taskStart === 'en cours' ? '[#7296e3]' : (taskStart === 'terminé' ? '[#b9b9b9]' : 'transparent')} rounded-sm h-[22px] border border-solid text-${task.start.isBefore(now) ? 'white min-w-[0]' : '[#7296e3] min-w-[48px]'} border-${taskStart === 'terminé' ? '[#b9b9b9]' : '[#7296e3]'} font-medium px-[6px] mt-[4px] flex justify-center items-center whitespace-nowrap uppercase" style="font-size: 14px;">${taskStart}</p>
        <p class="task-end bg-transparent rounded-sm border border-solid min-w-[48px] border-[#7296e3] text-[#7296e3] font-medium h-[22px] px-[6px] mt-[4px] flex justify-center items-center whitespace-nowrap uppercase ${task.start.isBefore(now) ? 'hidden' : ''}" style="font-size: 14px;">${task.end.format('HH:mm')}</p>
    </div>
</div>`
                tasksWrapper.innerHTML += taskHTML;
                index++;
            }

            tasks.innerHTML += `<div class="day-hover-tasks absolute w-screen flex justify-center items-center z-[-1] bg-[#f7f7f7] bg-opacity-50 opacity-0 backdrop-filter backdrop-blur-[10px] pointer-events-none flex-col">
                <p class="day-name uppercase font-bold leading-[26px] text-[#00000090]" style="font-size: 16px;"
                >${tradDays[moment(selectedDay, 'DD-MM-YYYY').format('dddd').toLowerCase()].complete}</p>
                <p class="day-number font-bold leading-[36px]" style="font-size: 32px;"
                >${moment(selectedDay, 'DD-MM-YYYY').format('DD')}</p>
                <p class="day-month uppercase font-bold leading-[26px] text-[#00000090]" style="font-size: 16px;"
                >${tradMonths[moment(selectedDay, 'DD-MM-YYYY').format('MMMM').toLowerCase()].complete}</p>
                </div>`

            // set scroll to top
            tasksWrapper.scrollTop = 0;
            window.scrollTo(0, 0);

            // event listeners

            /*
            event clique sur une tâche
            si la tache est en cours, on change le texte du bouton de "en cours" à "en cours jusqu'à hh:mm" ( avec hh:mm = heure de fin de la tâche )
            */
            const tasksElements = document.querySelectorAll('.task');
            let taskCounter = 0;
            for (const taskEl of tasksElements) {
                const task = day.tasks[taskCounter];
                taskCounter++;
                let touchStart = null;
                const touchDuration = 10 //ms

                taskEl.addEventListener('touchstart', function (e) {
                    touchStart = taskEl;
                })

                taskEl.addEventListener('touchend', function () {
                    if (touchStart === taskEl) {
                        if (this.classList.contains('current') || this.classList.contains('finished')) {
                            // task in progress
                            console.log('tâche en cours ou terminée')
                            const taskTimerText = this.querySelector('.task-start');
                            // animation de text qui s'écrit ( "en cours jusqu'à hh:mm" letre par lettre )
                            const taskTimerTextContent = taskTimerText.textContent;
                            const currentText = 'en cours';
                            const finishedText = 'terminé';
                            const finalText = `${task.start.format('HH:mm')} - ${task.end.format('HH:mm')}`;
                            if(finalText === taskTimerText.textContent) {
                                return;
                            }
                            const taskTimerTextAnimationClear = setInterval(() => {
                                if (taskTimerText.textContent.length > 0 && finalText !== taskTimerText.textContent) {
                                    taskTimerText.textContent = taskTimerText.textContent.slice(0, -1);
                                } else {
                                    clearInterval(taskTimerTextAnimationClear);
                                    const taskTimerTextAnimation = setInterval(() => {
                                        if (taskTimerText.textContent.length < finalText.length) {
                                            taskTimerText.textContent += finalText[taskTimerText.textContent.length];
                                        } else {
                                            clearInterval(taskTimerTextAnimation);
                                            // on attend 2 secondes avant de remettre le texte à "en cours"
                                            setTimeout(() => {
                                                const taskTimerTextAnimationClear2 = setInterval(() => {
                                                    if (taskTimerText.textContent.length > 0) {
                                                        taskTimerText.textContent = taskTimerText.textContent.slice(0, -1);
                                                    } else {
                                                        clearInterval(taskTimerTextAnimationClear2);
                                                        const taskTimerTextAnimation2 = setInterval(() => {
                                                            if (taskEl.classList.contains('current')) {
                                                                if (taskTimerText.textContent.length < currentText.length) {
                                                                    taskTimerText.textContent += currentText[taskTimerText.textContent.length];
                                                                } else {
                                                                    clearInterval(taskTimerTextAnimation2);
                                                                }
                                                            } else if (taskEl.classList.contains('finished')) {
                                                                if (taskTimerText.textContent.length < finishedText.length) {
                                                                    taskTimerText.textContent += finishedText[taskTimerText.textContent.length];
                                                                } else {
                                                                    clearInterval(taskTimerTextAnimation2);
                                                                }
                                                            }
                                                        }, 20)
                                                    }
                                                }, 20)
                                            }, 2000)
                                        }
                                    }, 20)
                                }
                            }, 20)
                        } else {
                            // tâche à venir
                            console.log('tâche à venir')
                        }
                    }
                })
                taskEl.addEventListener('touchmove', function () {
                    touchStart = null;
                })
            }
        }

    </script>
    <script>
        /*100%
        un bouton calendrier qui ouvre un calendrier ( qui vient du bas de l'écran ) avec le contenu suivant :
    un scroll vertical avec pour chaque mois a partir du mois actuel : le nom du mois (centré), puis en dessous la première lettre de chaque jour de la semaine ( L M M J V S D ) puis en dessous les numéros des jours du mois ( ex : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ... ) sous forme de grille correspondant au jour de la semaine ( ne commence pas forcément par le lundi )
    dans le coin en haut a droite, un bouton pour fermer le calendrier ou swipe vers le bas pour fermer le calendrier
        */

        const calendarWrapper = document.querySelector('#modal-from-bottom');
        const calendarButton = document.querySelector('#calendar-button');
        const calendar = document.createElement('div');
        calendar.classList.add('flex', 'flex-col', 'items-strech', 'justify-start', 'w-full', 'bg-white', 'shadow-[0px_-50px_400px_400px_#cccccc99]', 'overflow-y-scroll', 'px-[15px]', 'pt-[75px]', 'pb-[25px]', 'h-full');

        async function generateCalendar() {
            calendar.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const month = now.clone().add(i, 'month').date(1);
                const monthName = tradMonths[month.format('MMMM').toLowerCase()].complete;
                const monthEl = document.createElement('div');
                monthEl.classList.add('month', 'flex', 'flex-col', 'items-center', 'justify-start', 'w-full');
                const monthHTML = `
                <i class="fas fa-close absolute top-[15px] right-[15px] text-[#b9b9b9] text-[20px] cursor-pointer" onclick="calendarWrapper.classList.remove('open'); calendarWrapper.innerHTML=''"></i>
                <p class="month-name font-bold text-black text-[22px] leading-[24px] mb-[24px]">${monthName}</p>
    <div class="month-days flex flex-row items-center justify-center w-full">
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">L</p>
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">M</p>
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">M</p>
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">J</p>
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">V</p>
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">S</p>
        <p class="day-letter font-medium text-black text-[16px] uppercase w-[100%] flex justify-center items-center aspect-square">D</p>
    </div>
    <div class="days-number grid grid-cols-7 w-full mb-[16px]">
    </div>`
                monthEl.innerHTML = monthHTML;
                const listDaysInMonth = []

                for (let j = 0; j < month.daysInMonth(); j++) {
                    const day = month.clone().add(j, 'day');
                    let weekType = day.week() % 2 === 0 ? 'even' : 'odd';
                    if (day.day() === 0) {
                        weekType = weekType === 'even' ? 'odd' : 'even';
                    }
                    listDaysInMonth.push({
                        day: day,
                        dayNumber: day.format('DD'),
                        weekType: weekType,
                        weekDay: week[weekType][day.format('dddd').toLowerCase()],
                        dayName: day.format('dddd').toLowerCase(),
                        order: day.day() === 0 ? 6 : day.day() - 1,
                    });
                }
                let listDaysHTML = monthEl.querySelector('.days-number');
                // create space before first day
                for (let k = 0; k < listDaysInMonth[0].order; k++) {
                    const dayHTML = `<p class="day-number flex justify-center items-center text-[#b9b9b9] text-[14px] uppercase w-[100%]"></p>`
                    listDaysHTML.innerHTML += dayHTML;
                }

                for (const day in listDaysInMonth) {
                    let textColor = 'black'

                    if (listDaysInMonth[day].day.isBefore(now)) {
                        textColor = '[#b9b9b9]'
                    }
                    if (listDaysInMonth[day].weekDay.length === 0) {
                        textColor = '[#ddd] pointer-events-none'
                    }
                    if (listDaysInMonth[day].day.format('DD-MM-YYYY') === selectedDay) {
                        textColor += ' bg-[' + (listDaysInMonth[day].weekType === 'even' ? '#f3d269' : '#f4a08d') + (textColor === 'black' ? '' : '66') + '] rounded-full'
                    }
                    if (listDaysInMonth[day].day.isSame(now, 'day')) {
                        textColor += " after:bg-black after:rounded-full after:content-'' after:block after:h-[4px] after:w-[4px] after:mb-[-5px]"
                    }
                    const dayHTML = `<p class="day-number w-[100%] flex flex-col justify-center items-center aspect-square items-center text-${textColor} font-medium text-[16px] uppercase" data-day="${listDaysInMonth[day].day.format('DD-MM-YYYY')}">${listDaysInMonth[day].dayNumber}</p>`
                    listDaysHTML.innerHTML += dayHTML;
                }

                calendar.appendChild(monthEl);
            }
        }

        async function openCalendar() {
            await generateCalendar();
            calendarWrapper.appendChild(calendar);
            calendarWrapper.classList.add('open');

            // event listeners for days
            const daysElements = document.querySelectorAll('.day-number');
            for (const day of daysElements) {
                day.addEventListener('click', function () {
                    if (this.dataset.day) {
                        selectedDay = this.dataset.day;
                        const day = selectedDay === now.format('DD-MM-YYYY') ? now : moment(selectedDay, 'DD-MM-YYYY');
                        generateDays(day).then((days) => {
                            generateDaysHTML(days);
                        });
                        calendarWrapper.classList.remove('open');
                        calendarWrapper.innerHTML = '';
                    }
                })

            }
        }

    </script>
    <script>
        /* 
        faire glisser le doigt de gauche à droite pour changer de jour
        event listener sur #tasks pour glisser de gauche à droite, et changer de jour
        ajout d'une animation de transition pour le changement de jour
        */
        const tasks = document.querySelector('#tasks');
        let tasksOffset = 0;
        let tasksOffsetMin = 50;
        let tasksOffsetStart = 0;
        let tasksOffsetEnd = 0;
        let tasksOffsetDiff = 0;
        let tasksOnBlur = false;

        tasks.addEventListener('touchstart', function (e) {
            tasksOffsetStart = e.touches[0].clientX;
        })

        tasks.addEventListener('touchmove', function (e) {
            tasksOffsetEnd = e.touches[0].clientX;
            tasksOffsetDiff = tasksOffsetEnd - tasksOffsetStart;
            // si tasksOffsetDiff est < tasksOffsetMin && > -tasksOffsetMin, alors on ne bouge pas
            // sinon on bouge de tasksOffsetDiff - tasksOffsetMin si tasksOffsetDiff > 0 et tasksOffsetDiff + tasksOffsetMin si tasksOffsetDiff < 0
            if (tasksOffsetDiff > tasksOffsetMin) {
                tasksOffset = tasksOffsetDiff - tasksOffsetMin;
                let previousDay = moment(selectedDay, 'DD-MM-YYYY').add(-1, 'day');
                let previousDayWeekType = previousDay.week() % 2 === 0 ? 'even' : 'odd';
                if (previousDay.day() === 0) {
                    previousDayWeekType = previousDayWeekType === 'even' ? 'odd' : 'even';
                }
                // si previousDay est un jour sans tâches, previousDay = previousDay - 1
                while (week[previousDayWeekType][previousDay.format('dddd').toLowerCase()].length === 0) {
                    previousDay = previousDay.add(-1, 'day');
                    previousDayWeekType = previousDay.week() % 2 === 0 ? 'even' : 'odd';
                    if (previousDay.day() === 0) {
                        previousDayWeekType = previousDayWeekType === 'even' ? 'odd' : 'even';
                    }
                }
                document.querySelector('#next-or-prev-day>.day-name').innerText = tradDays[previousDay.format('dddd').toLowerCase()].complete
                document.querySelector('#next-or-prev-day>.day-number').innerText = previousDay.format('DD')
                document.querySelector('#next-or-prev-day>.day-month').innerText = tradMonths[previousDay.format('MMMM').toLowerCase()].complete
                tasks.querySelector('.day-hover-tasks').style.zIndex = '10';
                tasksOnBlur = true;
            } else if (tasksOffsetDiff < -tasksOffsetMin) {
                tasksOffset = tasksOffsetDiff + tasksOffsetMin;
                let nextDay = moment(selectedDay, 'DD-MM-YYYY').add(1, 'day');
                let nextDayWeekType = nextDay.week() % 2 === 0 ? 'even' : 'odd';
                if (nextDay.day() === 0) {
                    nextDayWeekType = nextDayWeekType === 'even' ? 'odd' : 'even';
                }
                // si nextDay est un jour sans tâches, nextDay = nextDay + 1
                while (week[nextDay.week() % 2 === 0 ? 'even' : 'odd'][nextDay.format('dddd').toLowerCase()].length === 0) {
                    nextDay = nextDay.add(1, 'day');
                    nextDayWeekType = nextDay.week() % 2 === 0 ? 'even' : 'odd';
                    if (nextDay.day() === 0) {
                        nextDayWeekType = nextDayWeekType === 'even' ? 'odd' : 'even';
                    }
                }
                document.querySelector('#next-or-prev-day>.day-name').innerText = tradDays[nextDay.format('dddd').toLowerCase()].complete
                document.querySelector('#next-or-prev-day>.day-number').innerText = nextDay.format('DD')
                document.querySelector('#next-or-prev-day>.day-month').innerText = tradMonths[nextDay.format('MMMM').toLowerCase()].complete
                tasks.querySelector('.day-hover-tasks').style.zIndex = '10';
                tasksOnBlur = true;
            } else {
                document.querySelector('#next-or-prev-day>.day-name').innerText = ''
                document.querySelector('#next-or-prev-day>.day-number').innerText = ''
                document.querySelector('#next-or-prev-day>.day-month').innerText = ''
                // reactiver le scroll de la page ( delete overflow: hidden )
                tasks.style.overflow = '';
                document.querySelector('main').style.overflow = '';
                tasksOffset = 0;
            }
            if (tasksOnBlur) {
                // désactiver le scroll de la page ( add overflow: hidden )
                tasks.style.overflow = 'hidden';
                document.querySelector('main').style.overflow = 'hidden';
                // ajout du numéro du nom du jour + numéro du jour + nom du mois ( meme style que les elements ".day" ) au milieu de la balise #tasks ( en position absolute ) avec un z-index de 1 ( pour être au dessus des tâches ) avec un fond blanc et une opacité de 0.5 et un filtre de flou gaussien de 10px
                tasks.querySelector('.day-hover-tasks').style.transition = 'opacity .1s ease-in-out';
                tasks.querySelector('.day-hover-tasks').style.opacity = '1';
            }
            tasks.style.transform = `translateX(${tasksOffset * 1.2}px)`;
        })

        tasks.addEventListener('touchend', async function (e) {
            tasksOnBlur = false;
            tasks.style.overflow = '';
            document.querySelector('main').style.overflow = '';
            if (tasksOffset > 0) {
                // aller à la tâche precedente
                tasksOffset = tasks.offsetWidth;
            } else if (tasksOffset < 0) {
                // aller à la tâche suivante
                tasksOffset = -tasks.offsetWidth;
            } else {
                // ne pas bouger
                tasksOffset = 0;
                tasks.querySelector('.day-hover-tasks').style.opacity = '0';
                tasks.style.transform = `translateX(0px)`;

                document.querySelector('#next-or-prev-day>.day-name').innerText = ''
                document.querySelector('#next-or-prev-day>.day-number').innerText = ''
                document.querySelector('#next-or-prev-day>.day-month').innerText = ''
                setTimeout(() => {
                    tasks.querySelector('.day-hover-tasks').style.zIndex = ''
                    tasks.style.transition = '';
                    tasks.style.transform = '';
                }, 200);
                return;
            }
            // transition: transform .3s ease-in-out;
            tasks.style.transition = 'transform .2s ease-in-out';
            tasks.style.transform = `translateX(${tasksOffset * 1.2}px)`;
            setTimeout(async () => {
                // changer de jour et de tâches
                // regenerer les days si le jour demandé est avant le premier jour affiché ou après le dernier jour affiché (generateDays)

                // changer le jour sélectionné
                if (tasksOffset > 0) {
                    // aller au jour précédente
                    selectedDay = moment(selectedDay, 'DD-MM-YYYY').add(-1, 'day').format('DD-MM-YYYY');
                    let selectedDayWeekType = moment(selectedDay, 'DD-MM-YYYY').week() % 2 === 0 ? 'even' : 'odd';
                    if (moment(selectedDay, 'DD-MM-YYYY').day() === 0) {
                        selectedDayWeekType = selectedDayWeekType === 'even' ? 'odd' : 'even';
                    }
                    // si selectedDay est un jour sans tâches, on passe au jour précédent
                    while (week[selectedDayWeekType][moment(selectedDay, 'DD-MM-YYYY').format('dddd').toLowerCase()].length === 0) {
                        selectedDay = moment(selectedDay, 'DD-MM-YYYY').add(-1, 'day').format('DD-MM-YYYY');
                        selectedDayWeekType = moment(selectedDay, 'DD-MM-YYYY').week() % 2 === 0 ? 'even' : 'odd';
                        if (moment(selectedDay, 'DD-MM-YYYY').day() === 0) {
                            selectedDayWeekType = selectedDayWeekType === 'even' ? 'odd' : 'even';
                        }
                    }
                } else if (tasksOffset < 0) {
                    // aller au jour suivante
                    selectedDay = moment(selectedDay, 'DD-MM-YYYY').add(1, 'day').format('DD-MM-YYYY');

                    let selectedDayWeekType = moment(selectedDay, 'DD-MM-YYYY').week() % 2 === 0 ? 'even' : 'odd';
                    if (moment(selectedDay, 'DD-MM-YYYY').day() === 0) {
                        selectedDayWeekType = selectedDayWeekType === 'even' ? 'odd' : 'even';
                    }
                    console.log(selectedDay, week[selectedDayWeekType][moment(selectedDay, 'DD-MM-YYYY').format('dddd').toLowerCase()].length === 0)
                    while (week[selectedDayWeekType][moment(selectedDay, 'DD-MM-YYYY').format('dddd').toLowerCase()].length === 0) {
                        selectedDay = moment(selectedDay, 'DD-MM-YYYY').add(1, 'day').format('DD-MM-YYYY');
                        selectedDayWeekType = moment(selectedDay, 'DD-MM-YYYY').week() % 2 === 0 ? 'even' : 'odd';
                        if (moment(selectedDay, 'DD-MM-YYYY').day() === 0) {
                            selectedDayWeekType = selectedDayWeekType === 'even' ? 'odd' : 'even';
                        }
                        console.log(selectedDay, week[selectedDayWeekType][moment(selectedDay, 'DD-MM-YYYY').format('dddd').toLowerCase()].length === 0)
                    }
                }

                //si selectedDay est dans les jours affichés, on ne regenere pas les jours
                let daysEl = document.querySelectorAll('.day');
                let daysDisplayed = [];
                for (const day of daysEl) {
                    daysDisplayed.push(day.dataset.day);
                }
                if (daysDisplayed.includes(selectedDay)) {
                    // on change le jour sélectionné
                    for (const day of daysEl) {
                        day.classList.remove('selected');
                        if (day.dataset.day === selectedDay) {
                            day.classList.add('selected');
                        }
                    }
                    // on change les tâches
                    const day = days.find(day => day.moment.format('DD-MM-YYYY') === selectedDay);
                    generateTasksHTML(day);
                } else {
                    // on regenere les jours à partir du jour sélectionné si selectedDay est avant le premier jour affiché
                    // sinon on regenere les jours à partir du jour sélectionné - 6
                    let day = moment(selectedDay, 'DD-MM-YYYY');
                    if (day.isBefore(moment(daysEl[0].dataset.day, 'DD-MM-YYYY'))) {
                        await generateDays(day)
                        generateDaysHTML(days);
                    } else {
                        day = day.add(-6, 'day');
                        await generateDays(day)
                        generateDaysHTML(days)
                        daysEl = document.querySelectorAll('.day');
                        selectedDay = day.add(6, 'day').format('DD-MM-YYYY');
                        for (const day of daysEl) {
                            day.classList.remove('selected');
                            if (day.dataset.day === selectedDay) {
                                day.classList.add('selected');
                            }
                        }
                        // on change les tâches
                        generateTasksHTML(days.find(day => day.moment.format('DD-MM-YYYY') === selectedDay));
                    }
                }

                //on scroll jusqu'au jour sélectionné
                const dayElement = document.querySelector('.day.selected');
                console.info(dayElement, dayElement.offsetLeft - (daysWrapper.offsetWidth / 2) + (dayElement.offsetWidth / 2))
                if (dayElement) daysWrapper.scrollLeft = dayElement.offsetLeft - (daysWrapper.offsetWidth / 2) + (dayElement.offsetWidth / 2);


                document.querySelector('#next-or-prev-day').style.transition = 'opacity .05s ease-in-out';
                document.querySelector('#next-or-prev-day').style.zIndex = '10';
                document.querySelector('#next-or-prev-day').style.opacity = '0';
                tasks.querySelector('.day-hover-tasks').style.transition = '';
                tasks.querySelector('.day-hover-tasks').style.opacity = '0';
                tasks.style.transition = '';
                tasks.style.transform = '';
                tasksOffset = 0;
                setTimeout(() => {
                    document.querySelector('#next-or-prev-day').style.zIndex = '-1';
                    tasks.querySelector('.day-hover-tasks').style.zIndex = '';
                    document.querySelector('#next-or-prev-day').style.opacity = '1';
                }, 100);
            }, 200);
        })
    </script>
</body>

</html>